DynaFix: A Dynamic Analysis-Enhanced LLM Framework for Automated Program Repair
This repository contains the replication package for the paper submitted to TOSEM: "DynaFix: Enhancing LLM-based Program Repair with Dynamic Execution Traces".

ğŸ“– Overview
DynaFix is an automated program repair (APR) framework that leverages dynamic execution traces to guide Large Language Models (LLMs) in fixing software bugs. It integrates a lightweight Java agent (ByteTrace) to capture runtime variable values and method calls, providing LLMs with precise context for patch generation.

ğŸ“‚ Project Structure
(è¿™é‡Œç²˜è´´ä½ åˆšæ‰æ•´ç†å¥½çš„é‚£æ®µ File Structure)

Plaintext
.
â”œâ”€â”€ ByteTrace/                  # ğŸ•µï¸ Java Instrumentation Tool (Agent)
â”‚   â”œâ”€â”€ ByteTrace_code/         # Source code (Java/Kotlin implementation)
â”‚   â””â”€â”€ ByteTrace.jar           # Pre-compiled Java Agent JAR file
â”‚
â”œâ”€â”€ data/                       # ğŸ’¾ Datasets and Input/Output Data
â”‚   â”œâ”€â”€ input/                  # Buggy method locations (Fault Localization)
â”‚   â”œâ”€â”€ output/                 # Collected dynamic runtime information
â”‚   â”œâ”€â”€ SBFL/                   # Top-k suspicion lists from SBFL
â”‚   â”œâ”€â”€ Defects4J/              # Metadata for the standard Defects4J dataset
â”‚   â””â”€â”€ Defects4J_trans/        # Metadata for the transformed Defects4J dataset
â”‚
â”œâ”€â”€ DynaFix/                    # ğŸ§  Core Repair Framework (Python)
â”‚   â”œâ”€â”€ LLM_Fix.py              # ğŸš€ Main entry script for executing repair
â”‚   â”œâ”€â”€ DebugInfoFetch/         # Scripts for Defects4J interaction & trace collection
â”‚   â”œâ”€â”€ LLM/                    # Interfaces for LLM models (GPT-4o, DeepSeek)
â”‚   â”œâ”€â”€ validator/              # Logic for test execution and patch validation
â”‚   â””â”€â”€ result/                 # Temporary logs for current repair sessions
â”‚
â””â”€â”€ Result/                     # ğŸ“Š Experimental Results (RQ1-RQ4)

ğŸ› ï¸ Requirements
To run DynaFix and reproduce the experiments, you need the following environment:

Operating System: Linux (Ubuntu 20.04+ recommended) or macOS. (Note: Defects4J works best on Linux/macOS)

Java: JDK 1.8 (Required for Defects4J and the target projects).

Python: Python 3.8 or higher.

Defects4J: Version 2.0. Please follow the official installation guide.

API Keys: OpenAI API Key (for GPT-4o) or DeepSeek API Key.

ğŸš€ Installation
Clone the repository:

Bash
git clone https://github.com/gujiprogram/DynaFix.git
cd DynaFix
Install Python dependencies:

Bash
pip install -r requirements.txt
Configure Environment Variables:
Create a .env file in the root directory and add your API keys:

ä»£ç æ®µ
OPENAI_API_KEY=sk-...
DEEPSEEK_API_KEY=sk-...
DEFECTS4J_HOME=/path/to/defects4j
ğŸ’» Usage
1. Instrumentation (ByteTrace)
If you want to manually collect traces using ByteTrace:

Bash
# Example command to attach the agent
java -javaagent:ByteTrace/ByteTrace.jar -cp ...
(æˆ–è€…è¯´æ˜ DynaFix ä¼šè‡ªåŠ¨è°ƒç”¨å®ƒï¼Œä¸éœ€è¦æ‰‹åŠ¨è¿è¡Œ)

2. Running DynaFix (Automated Repair)
To run the full repair pipeline on a specific bug (e.g., Chart-1):

Bash
python DynaFix/LLM_Fix.py --project Chart --bug_id 1 --model gpt-4o
